<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Vaillant • Factory Assistant</title>
    
    <link rel="icon" type="image/png" href="assets/vaillant-logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    
    <!-- Стили -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/desktop.css">
    <link rel="stylesheet" href="css/tablet.css">
    <link rel="stylesheet" href="css/mobile.css">
</head>
<body>
    <!-- Прелоадер -->
    <div id="preloader">
        <div class="loader">
            <div class="loader-spinner"></div>
            <img src="assets/vaillant-logo.png" alt="Vaillant">
            <h2>Vaillant<span>Assistant</span></h2>
            <p id="loadingStatus">Загрузка...</p>
        </div>
    </div>

    <!-- Модалка авторизации -->
    <div class="modal" id="authModal">
        <div class="modal-content auth-card">
            <div class="auth-logo">
                <img src="assets/vaillant-logo.png" alt="Vaillant">
                <h2>Vaillant<span>Assistant</span></h2>
            </div>
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="window.showLoginForm()"><span data-lang="login">Вход</span></button>
                <button class="auth-tab" onclick="window.showRegisterForm()"><span data-lang="register">Регистрация</span></button>
            </div>
            
            <div id="loginForm" class="auth-form active">
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="loginEmail" data-lang-placeholder="email" placeholder="Email">
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="loginPass" data-lang-placeholder="password" placeholder="Пароль">
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="rememberMe">
                    <label for="rememberMe" data-lang="rememberMe">Запомнить меня</label>
                </div>
                <button class="btn-primary" onclick="window.login()"><span data-lang="loginBtn">Войти</span></button>
            </div>
            
            <div id="registerForm" class="auth-form">
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="regEmail" data-lang-placeholder="email" placeholder="Email">
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="regPass" data-lang-placeholder="password" placeholder="Пароль">
                </div>
                <div class="input-group">
                    <i class="fas fa-check-circle"></i>
                    <input type="password" id="regConfirm" data-lang-placeholder="confirmPassword" placeholder="Подтвердите пароль">
                </div>
                <button class="btn-primary" onclick="window.register()"><span data-lang="registerBtn">Зарегистрироваться</span></button>
            </div>
        </div>
    </div>

    <!-- Основное приложение -->
    <div id="app" class="hidden">
        <header>
            <div class="header-left">
                <div class="logo">
                    <img src="assets/vaillant-logo.png" alt="Vaillant">
                    <h1>Assistant</h1>
                </div>
                <div class="header-badge pulse"><span data-lang="factoryPro">FACTORY PRO</span></div>
                <div class="language-selector">
                    <button class="lang-btn" data-lang="ru" onclick="window.setLanguage('ru')">RU</button>
                    <button class="lang-btn" data-lang="sk" onclick="window.setLanguage('sk')">SK</button>
                    <button class="lang-btn" data-lang="en" onclick="window.setLanguage('en')">EN</button>
                    <button class="lang-btn" data-lang="uk" onclick="window.setLanguage('uk')">UA</button>
                </div>
            </div>
            
            <div class="header-right">
                <div class="header-widget">
                    <div class="widget-time">
                        <span class="time" id="time"></span>
                    </div>
                    <div class="widget-date-weather">
                        <span class="date" id="date"></span>
                        <span class="weather">
                            <i class="fas fa-cloud-sun"></i>
                            <span id="weatherTemp">--°C</span>
                            <span class="weather-location">Trenčín</span>
                        </span>
                    </div>
                </div>
                
                <div class="user-info">
                    <img id="avatarPreview" src="" alt="avatar">
                    <span id="userName">Guest</span>
                </div>
                <button class="logout-btn" onclick="window.logout()" title="Logout">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
                
                <div class="mobile-menu-toggle" onclick="window.toggleMobileMenu()">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </header>

        <!-- Навигация -->
        <nav id="mainNav">
            <button class="nav-btn" data-view="dashboard" onclick="window.setView('dashboard')">
                <i class="fas fa-chart-pie"></i><span data-lang="dashboard">Дашборд</span>
            </button>
            <button class="nav-btn" data-view="calendar" onclick="window.setView('calendar')">
                <i class="fas fa-calendar-alt"></i><span data-lang="calendar">Календарь</span>
            </button>
            <button class="nav-btn" data-view="stats" onclick="window.setView('stats')">
                <i class="fas fa-chart-line"></i><span data-lang="stats">Статистика</span>
            </button>
            <button class="nav-btn" data-view="profile" onclick="window.setView('profile')">
                <i class="fas fa-user-cog"></i><span data-lang="profile">Профиль</span>
            </button>
            <button class="nav-btn" data-view="finance" onclick="window.setView('finance')">
                <i class="fas fa-coins"></i><span data-lang="finance">Финансы</span>
            </button>
        </nav>

        <main>
            <!-- ДАШБОРД -->
            <section id="dashboard" class="view active">
                <!-- Здесь содержимое дашборда (оставляем как есть) -->
            </section>

            <!-- КАЛЕНДАРЬ -->
            <section id="calendar" class="view">
                <!-- Здесь содержимое календаря (оставляем как есть) -->
            </section>

            <!-- СТАТИСТИКА -->
            <section id="stats" class="view">
                <!-- Здесь содержимое статистики (оставляем как есть) -->
            </section>

            <!-- ПРОФИЛЬ -->
            <section id="profile" class="view">
                <!-- Здесь содержимое профиля (оставляем как есть) -->
            </section>

            <!-- ФИНАНСЫ -->
            <section id="finance" class="view">
                <!-- Здесь содержимое финансов (оставляем как есть) -->
            </section>
        </main>
    </div>

    <!-- Модалка выбора типа дня -->
    <div class="modal" id="dayModal">
        <div class="modal-content day-modal glass-effect">
            <div class="modal-header">
                <h3><i class="fas fa-calendar-day"></i> <span data-lang="selectDayType">Выберите тип дня</span></h3>
            </div>
            <div class="day-types">
                <button class="day-type work" onclick="window.addRecord('work')">
                    <i class="fas fa-briefcase"></i><span data-lang="work">Смена</span><small>7.5ч</small>
                </button>
                <button class="day-type night" onclick="window.addRecord('night')">
                    <i class="fas fa-moon"></i><span data-lang="nightShift">Ночная</span><small>+20%</small>
                </button>
                <button class="day-type overtime" onclick="window.addRecord('overtime')">
                    <i class="fas fa-clock"></i><span data-lang="overtime">Переработка</span><small>×1.5</small>
                </button>
                <button class="day-type saturday" onclick="window.addRecord('sat')">
                    <i class="fas fa-calendar-day"></i><span data-lang="saturday">Суббота</span><small>×1.5 +€25</small>
                </button>
                <button class="day-type sunday" onclick="window.addRecord('sun')">
                    <i class="fas fa-sun"></i><span data-lang="sunday">Воскресенье</span><small>×2.0</small>
                </button>
                <button class="day-type extra" onclick="window.addRecord('extra')">
                    <i class="fas fa-plus-circle"></i><span data-lang="extraBlocks">Надчас</span><small>+3.75ч</small>
                </button>
                <button class="day-type sick" onclick="window.addRecord('sick')">
                    <i class="fas fa-hospital"></i><span data-lang="sick">Больничный</span><small>60%</small>
                </button>
                <button class="day-type vacation" onclick="window.addRecord('vacation')">
                    <i class="fas fa-umbrella-beach"></i><span data-lang="vacation">Отпуск</span><small>100%</small>
                </button>
                <button class="day-type doctor" onclick="window.addRecord('doctor')">
                    <i class="fas fa-stethoscope"></i><span data-lang="doctor">Перепустка</span><small>100%</small>
                </button>
                <button class="day-type off" onclick="window.addRecord('off')">
                    <i class="fas fa-times"></i><span data-lang="dayOff">Выходной</span><small>0 €</small>
                </button>
            </div>
            <button class="btn-secondary cancel-btn" onclick="window.closeModal()">
                <span data-lang="cancel">Отмена</span>
            </button>
        </div>
    </div>

    <!-- Уведомления -->
    <div id="notification" class="notification hidden">
        <div class="notification-content">
            <span id="notificationMessage"></span>
            <button onclick="window.hideNotification()"><i class="fas fa-times"></i></button>
        </div>
    </div>

    <!-- СКРИПТЫ - ИСПРАВЛЕННЫЕ ПУТИ -->
    <script type="module" src="modules/firebase-config.js"></script>
    <script type="module" src="modules/translations.js"></script>
    <script type="module" src="modules/utils.js"></script>
    <script type="module" src="modules/salary.js"></script>
    <script type="module" src="modules/auth.js"></script>
    <script type="module" src="modules/theme.js"></script>
    <script type="module" src="modules/time.js"></script>
    <script type="module" src="modules/weather.js"></script>
    <script type="module" src="modules/calendar.js"></script>
    <script type="module" src="modules/dashboard.js"></script>
    <script type="module" src="modules/stats.js"></script>
    <script type="module" src="modules/finance.js"></script>
    <script type="module" src="modules/exchange.js"></script>
    <script type="module" src="modules/important-dates.js"></script>
    <script type="module" src="modules/export.js"></script>
    <script type="module" src="modules/import.js"></script>
    <script type="module" src="modules/financial-tip.js"></script>
    <script type="module" src="modules/notifications.js"></script>
    <script type="module" src="modules/main.js"></script>
    
    <!-- Модули -->
    <script type="module" src="modules/pull-to-refresh.js"></script>
</body>
</html>
